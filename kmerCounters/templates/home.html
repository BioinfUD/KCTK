{% extends "base.html" %}
{% block content %}
<!-- HOME si el usuario está logueado -->
{% if user.is_authenticated %}
    <h1 style="text-align: center;">
       Resumen de la actividad de usuario
    </h1>
    <br>
    <p>
        <div class="row">
            <div class="col-sm-12" style='text-align:justify'>
            <div class="row">
                <div class="col-sm-5" style="border: white solid 1px;border-radius: 4px;margin-left: 14px;">
                    <h4>Últimos archivos subidos:</h4>  <p></p><br><br>
                    <div class="list-group">
                        <div href="#" class="list-group-item" style="font-weight: bold;">
                            <span>
                                Nombre del archivo
                            </span>
                            <span class="pull-right">
                                Descargar
                            </span>
                        </div> 
                    {% for f in uploadFiles %}
                        <div href="#" class="list-group-item glyphicon glyphicon-file">
                            <span class="" title="Description: {{f.description}}">
                                {{f.fileUpload.name|truncatechars:50}}
                            </span>
                            <span class="pull-right">
                                <span class="label label-success glyphicon glyphicon-download" style="display: table-cell;">
                                    <a style="color:white" href="/files/{{f.id}}/">
                                    Descargar 
                                    </a>
                                </span>
                            </span>
                        </div> 
                    {% endfor %}
                    </div>
                </div>
                <div class="col-sm-5" style="border: white solid 1px;border-radius: 4px;margin-left: 14px;">
                    <h4>Últimos Procesos ejecutados:</h4>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Contador</th>
                                <th>Estado</th>
                                <th>Ver</th>
                            </tr>
                        </thead>
                    <tbody>
                    {% for p in procesos %}
                        <tr
                            {% if "Terminado exitosamente" == p.get_estado %}
                                style="background-color: #1E611E;"
                            {% elif "Terminado con errores" == p.get_estado %}
                                style="background-color: #6B2223;"
                            {% endif %}
                        >
                            <td>{{p.pk}}</td>
                            <td>{{p.contador}}</td>
                            <td>{{p.get_estado}}</td>
                            <td>{% if "Iniciado" == p.get_estado or "En espera" == p.get_estado %}
                                {% elif "Terminado con errores" == p.get_estado %}
                                <a href="/process/error/{{p.id}}/">Ver</a>
                                {% else %}
                                <a href="/process/show/{{p.id}}/">Ver</a>
                                {% endif %}
                        </tr>
                    {% endfor %}
                    </tbody>
                </div>
            </div>
            </div>
        </div>
    </p>
    <br><br>
<!-- HOME si el usuario NO está logueado -->
{% else %}
<div class="row" style="text-align:center">
    <div class="col-sm-12">
        <h1>
            KmerCountersToolKit (KCTK)
        </h1>
        <br>
    </div>
</div>
<div class="row">
    <div class="col-sm-3"></div>
    <div class="col-sm-6">
        <iframe width="100%" height="315" src="https://www.youtube.com/embed/io-dJGfCs80?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
    </div>
    <div class="col-sm-3"></div>
</div>
<br>
<div class="row">
    <div class="col-sm-2"></div>
    <div class="col-sm-8">
        KmerCountersToolKit (KCTK) es un kit de herramientas para el conteo de kmers. Este kit cuenta con los contadores de kmers desarrollados en los ultimos años y posee una interfaz grafica orientada a la web que le permite al usuario la gestión de archivos, procesos y resultados de una manera rapida e intuitiva.
    </div>
    <div class="col-sm-2"></div>
</div>
{% endif %}


{% endblock %}